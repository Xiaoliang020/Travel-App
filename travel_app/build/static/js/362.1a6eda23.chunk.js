"use strict";(self.webpackChunktravel_app=self.webpackChunktravel_app||[]).push([[362],{5682:function(e,t,n){n(2791);t.Z=n.p+"static/media/flaggreen.0d04a2a14a4cda256aa08ab3061b4a28.svg"},2741:function(e,t,n){n(2791);t.Z=n.p+"static/media/flagred.7ce369b6a269d5ef47359565b2ded2dc.svg"},4362:function(e,t,n){n.r(t);var a=n(9439),r=n(2791),c=n(7993),i=n(7689),o=n(573),s=n(17),d=n(1243),l=(n(870),n(5682)),u=n(2741),p=n(184);t.default=function(){var e=(0,i.UO)().pathId,t=(0,r.useState)(null),n=(0,a.Z)(t,2),h=n[0],f=n[1],g=(0,r.useState)([]),m=(0,a.Z)(g,2),v=m[0],x=m[1],j=(0,r.useState)(15),k=(0,a.Z)(j,2),w=k[0],Z=(k[1],(0,r.useState)(!1)),S=(0,a.Z)(Z,2),b=S[0],C=S[1],z=(0,r.useRef)(""),A=(0,c.Db)({googleMapsApiKey:"AIzaSyA1ythArpYzyCd9fOmJ9c3iIXCB83eAnfE"}).isLoaded,y="https://travel-app.online:8443";(0,r.useEffect)((function(){d.Z.get("".concat(y,"/api/share/").concat(e)).then((function(e){f(e.data.data),console.log("Successfully retrive shared path:",e.data.data)})).catch((function(e){console.error("Error retrieving shared path:",e)})),d.Z.get("".concat(y,"/api/share/marker/").concat(e)).then((function(e){console.log(e.data.data);var t=e.data.data;Promise.all(t.map((function(e){return d.Z.get("".concat(y,"/api/icon/").concat(e.icon)).then((function(t){if("0"===t.data.code){console.log("Marker data get successfully",t.data);var n=t.data.data,a={url:"data:image/png;base64,".concat(n),scaledSize:new window.google.maps.Size(64,64)};e.url=a}})).catch((function(e){console.log("Error getting marker icon from the backend:",e)}))}))).then((function(){x(t),C(!0)}))})).catch((function(e){console.error("Error retrieving shared markers:",e)}))}),[e]);var E=function(e){e.marker;var t=e.pictureDataGroup;e.inputText;return(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{children:["Text: ",z.current]}),(0,p.jsx)("br",{}),"Pictures:",(0,p.jsx)("div",{children:(0,p.jsx)(o.Z.PreviewGroup,{preview:{onChange:function(e,t){return console.log("current index: ".concat(e,", prev index: ").concat(t))}},children:t.map((function(e,t){return(0,p.jsx)(o.Z,{width:100,src:"data:image/png;base64,".concat(e)},t)}))})})]})},T=function(e,t){s.Z.confirm({title:"The marker you left in this place",content:(0,p.jsx)(E,{marker:e,pictureDataGroup:t},(new Date).getTime()),onOk:function(e){e()}})};if(!h||!b||!A)return(0,p.jsx)("div",{children:"Loading..."});var P={lat:h.path[0].lat,lng:h.path[0].lng},L=h.path,N=L[0],D=L[L.length-1];return A?(0,p.jsxs)("div",{className:"map-view",children:[(0,p.jsxs)("div",{className:"path-info",children:[(0,p.jsxs)("h1",{children:["Path Name: ",h.name]}),(0,p.jsxs)("p",{children:["Start Address: ",h.startAddress]}),(0,p.jsxs)("p",{children:["End Address: ",h.endAddress]}),(0,p.jsxs)("p",{children:["Start Time: ",h.startTime]}),(0,p.jsxs)("p",{children:["End Time: ",h.endTime]})]}),(0,p.jsx)("div",{className:"map-container",children:b&&A&&(0,p.jsxs)(c.b6,{center:P,zoom:w,mapContainerClassName:"map-container",children:[(0,p.jsx)(c.dp,{path:L,options:{strokeColor:"#5900FF",strokeOpacity:1,strokeWeight:5}}),v.map((function(e){return(0,p.jsx)(c.jC,{position:{lat:e.markerLat,lng:e.markerLng},icon:e.url,onClick:function(){return function(e){console.log("marker text is:"+e.text),z.current=e.text;var t=e.picture.map((function(e){return d.Z.get("".concat(y,"/api/picture/").concat(e)).then((function(e){return"0"===e.data.code?e.data.data:(console.log("Picture not found"),null)})).catch((function(e){return console.error("Error fetching picture data:",e),null}))}));Promise.all(t).then((function(t){var n=t.filter((function(e){return null!==e}));T(e,n)}))}(e)}},e.id)})),(0,p.jsx)(c.jC,{position:N,icon:{url:l.Z,scaledSize:new window.google.maps.Size(32,32)}}),(0,p.jsx)(c.jC,{position:D,icon:{url:u.Z,scaledSize:new window.google.maps.Size(32,32)}})]})})]}):(0,p.jsx)("div",{children:"Loading.."})}},870:function(){}}]);
//# sourceMappingURL=362.1a6eda23.chunk.js.map