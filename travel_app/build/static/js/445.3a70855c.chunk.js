"use strict";(self.webpackChunktravel_app=self.webpackChunktravel_app||[]).push([[445],{445:function(t,n,o){o.r(n),o.d(n,{default:function(){return u}});var e=o(433),a=o(439),i=o(791),r=o(993),l=(o(508),o(913)),c=o(978),s=o(184);function u(){var t=(0,i.useState)([]),n=(0,a.Z)(t,2),o=n[0],u=n[1],d=(0,i.useState)(!1),g=(0,a.Z)(d,2),p=g[0],f=g[1],h=(0,i.useState)(0),v=(0,a.Z)(h,2),m=v[0],j=v[1],k=(0,i.useState)({lat:null,lng:null}),x=(0,a.Z)(k,2),b=x[0],C=x[1],S=(0,i.useState)(!0),y=(0,a.Z)(S,2),Z=y[0],P=y[1],w=(0,i.useState)(null),I=(0,a.Z)(w,2),N=I[0],A=I[1],E=(0,i.useState)(14),D=(0,a.Z)(E,2),L=D[0],F=D[1],_=(0,i.useContext)(l.Z),O=_.addPath,z=_.displayedPath,G=_.setDisplayedPath,M=(0,i.useContext)(c.N).theme,T=(0,r.Db)({googleMapsApiKey:"AIzaSyAwnNq68eny2SDMxe4og-nRYvrB_jXAP-g"}).isLoaded,W="default"===M?"17e23ad9dc98cd76":"965d3fbc319fcf57";(0,i.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){A({lat:t.coords.latitude,lng:t.coords.longitude})}),(function(t){console.error("Error retrieving geolocation:",t),A({lat:40.7128,lng:-74.006})})):A({lat:40.7128,lng:-74.006})}),[]),(0,i.useEffect)((function(){z&&z.length>0?(A(z[0]),F(15)):o.length>0&&A(o[o.length-1])}),[z,o]),(0,i.useEffect)((function(){var t;return p&&(navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,o=n.latitude,a=n.longitude;u((function(t){return[].concat((0,e.Z)(t),[{lat:o,lng:a,type:"default",pathId:m}])})),C({lat:o,lng:a}),console.log("Got first location after click the button")}),(function(t){console.error("Error retrieving geolocation:",t)})),t=setInterval((function(){navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,o=n.latitude,a=n.longitude;u((function(t){return[].concat((0,e.Z)(t),[{lat:o,lng:a,type:"default",pathId:m}])})),C({lat:o,lng:a}),console.log("Get a location"),console.log(m)}),(function(t){console.error("Error retrieving geolocation:",t)}))}),1e4)),function(){return clearInterval(t)}}),[p,m]);var q=o.reduce((function(t,n){return(t[n.pathId]=t[n.pathId]||[]).push(n),t}),{});return T?(0,s.jsxs)("div",{className:"map-view",children:[(0,s.jsx)("h1",{children:"Location Information"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:["Latitude: ",b.lat]}),(0,s.jsxs)("p",{children:["Longitude: ",b.lng]})]}),(0,s.jsx)("div",{children:p?(0,s.jsx)("button",{className:"tracking-button tracking-button-stop",onClick:function(){f(!1),console.log("Stop tracking"),window.confirm("Do you want to save this path?")&&O(o)},children:"Stop Tracking"}):(0,s.jsx)("button",{className:"tracking-button tracking-button-start",onClick:function(){u([]),f(!0),j(m+1),console.log("Start tracking")},children:"Start Tracking"})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"visibility-button",onClick:function(){P(!Z)},children:Z?"Hide Paths":"Show Paths"})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"add-point-button",onClick:function(){var t={lat:b.lat,lng:b.lng,type:"custom",id:Date.now()};u((function(n){return[].concat((0,e.Z)(n),[t])})),console.log("Add an information point")},disabled:!p,children:"Add a Point"})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"clear-button",onClick:function(){u([]),j(0),G([])},disabled:p,children:"Clear"})}),(0,s.jsx)("div",{children:(0,s.jsxs)(r.b6,{center:N,zoom:L,mapContainerClassName:"map-container",options:{mapId:W},children:[Z&&Object.values(q).map((function(t,n){return(0,s.jsx)(r.dp,{path:t,options:{strokeColor:"#0000FF",strokeOpacity:1,strokeWeight:5}},n)})),z&&Z&&(0,s.jsx)(r.dp,{path:z,options:{strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:5}}),o.map((function(t,n){return(0,s.jsx)(r.jC,{position:t,icon:"custom"===t.type?{url:"https://developers.google.com/maps/documentation/javascript/examples/full/images/info-i_maps.png"}:null},n)}))]})})]}):(0,s.jsx)("div",{children:"Loading.."})}}}]);
//# sourceMappingURL=445.3a70855c.chunk.js.map