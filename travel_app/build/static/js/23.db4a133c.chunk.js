"use strict";(self.webpackChunktravel_app=self.webpackChunktravel_app||[]).push([[23],{4023:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var a=n(9439),r=n(2791),o=n(7175),i=n(7027),d=n(7309),c=n(3218),s=n(6375),l=n(7689),u=n(1913),h=n(1243),p=n(184);function f(){var e=(0,r.useContext)(u.Z),t=(e.savedPaths,e.setDisplayedPath),n=(e.deletePath,(0,r.useState)([])),f=(0,a.Z)(n,2),m=f[0],v=f[1],x=(0,l.s0)(),w=JSON.parse(sessionStorage.getItem("user"));(0,r.useEffect)((function(){h.Z.get("/api/paths/".concat(w.id)).then((function(e){console.log(e.data),v(e.data.data)})).catch((function(e){console.error("Error retrieving paths:",e)}))}),[]);var S=function(e){var t=function(){var e=window.location.protocol,t=window.location.hostname,n=window.location.port,a=(window.location.pathname,n&&"80"!==n&&"443"!==n?":".concat(n):"");return"".concat(e,"//").concat(t).concat(a)}();console.log(t),i.ZP.success("Shareable link: "+t+"/share/".concat(e))},j=[{title:"Path Name",dataIndex:"name",key:"name"},{title:"Start place & time",dataIndex:"start",key:"start",render:function(e,t){return(0,p.jsxs)("div",{children:[(0,p.jsxs)("p",{children:["Time: ",new Date(t.startTime).toLocaleString()]}),(0,p.jsxs)("p",{children:["Place: ",t.startAddress]})]})},sorter:function(e,t){return new Date(e.startTime)-new Date(t.startTime)}},{title:"End place & time",dataIndex:"end",key:"end",render:function(e,t){return(0,p.jsxs)("div",{children:[(0,p.jsxs)("p",{children:["Time: ",new Date(t.endTime).toLocaleString()]}),(0,p.jsxs)("p",{children:["Place: ",t.endAddress]})]})},sorter:function(e,t){return new Date(e.endTime)-new Date(t.endTime)}},{title:"Duration",dataIndex:"duration",key:"duration",render:function(e,t){return(0,p.jsx)("div",{children:k(t.duration)})},sorter:function(e,t){return e.duration-t.duration}},{title:"Action",key:"action",render:function(e,n){return(0,p.jsxs)("div",{children:[(0,p.jsx)(d.ZP,{onClick:function(){return e=n.path,t(e),void x("/map");var e},children:"Display on map"}),(0,p.jsx)(d.ZP,{onClick:function(){return e=n.id,void o.Z.confirm({centered:!0,title:"Confirm Deletion",content:"Are you sure you want to delete this path?",onOk:function(){console.log(e);var t={pathId:e};h.Z.post("/api/paths-delete",t).then((function(e){"0"===e.data.code?(console.log("Delete successful!",e.data),i.ZP.success("Delete success!"),window.location.reload()):"-1"===e.data.code&&console.error("Delete failed:",e.data.msg)}))}});var e},children:"Delete"}),(0,p.jsx)(d.ZP,{onClick:function(){return S(n.id)},children:"Share"})]})}}],k=function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.round(e%60);return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))},g=m.map((function(e,t){return{key:t+1,id:e.id,path:e.path,startTime:e.startTime,endTime:e.endTime,duration:e.duration,startAddress:e.startAddress,endAddress:e.endAddress,name:e.name}}));return(0,p.jsx)("div",{children:(0,p.jsx)("div",{children:(0,p.jsx)(c.Z,{title:"Saved Paths",children:(0,p.jsx)(s.Z,{columns:j,dataSource:g})})})})}}}]);
//# sourceMappingURL=23.db4a133c.chunk.js.map