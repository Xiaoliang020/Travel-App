"use strict";(self.webpackChunktravel_app=self.webpackChunktravel_app||[]).push([[23],{4023:function(t,e,n){n.r(e),n.d(e,{default:function(){return f}});var a=n(9439),r=n(2791),o=n(7175),i=n(7027),c=n(7309),d=n(3218),s=n(9902),l=n(7689),u=n(1913),h=n(1243),p=n(184);function f(){var t=(0,r.useContext)(u.Z),e=(t.savedPaths,t.setDisplayedPath),n=(t.deletePath,(0,r.useState)([])),f=(0,a.Z)(n,2),m=f[0],v=f[1],x=(0,l.s0)(),w=JSON.parse(sessionStorage.getItem("user")),S="https://travel-app.online:8443";(0,r.useEffect)((function(){h.Z.get("".concat(S,"/api/paths/").concat(w.id)).then((function(t){console.log(t.data),v(t.data.data)})).catch((function(t){console.error("Error retrieving paths:",t)}))}),[]);var j=function(t){var e=function(){var t=window.location.protocol,e=window.location.hostname,n=window.location.port,a=(window.location.pathname,n&&"80"!==n&&"443"!==n?":".concat(n):"");return"".concat(t,"//").concat(e).concat(a)}();console.log(e),i.ZP.success("Shareable link: "+e+"/share/".concat(t))},k=[{title:"Path Name",dataIndex:"name",key:"name"},{title:"Start place & time",dataIndex:"start",key:"start",render:function(t,e){return(0,p.jsxs)("div",{children:[(0,p.jsxs)("p",{children:["Time: ",new Date(e.startTime).toLocaleString()]}),(0,p.jsxs)("p",{children:["Place: ",e.startAddress]})]})},sorter:function(t,e){return new Date(t.startTime)-new Date(e.startTime)}},{title:"End place & time",dataIndex:"end",key:"end",render:function(t,e){return(0,p.jsxs)("div",{children:[(0,p.jsxs)("p",{children:["Time: ",new Date(e.endTime).toLocaleString()]}),(0,p.jsxs)("p",{children:["Place: ",e.endAddress]})]})},sorter:function(t,e){return new Date(t.endTime)-new Date(e.endTime)}},{title:"Duration",dataIndex:"duration",key:"duration",render:function(t,e){return(0,p.jsx)("div",{children:g(e.duration)})},sorter:function(t,e){return t.duration-e.duration}},{title:"Action",key:"action",render:function(t,n){return(0,p.jsxs)("div",{children:[(0,p.jsx)(c.ZP,{onClick:function(){return t=n.path,e(t),void x("/map");var t},children:"Display on map"}),(0,p.jsx)(c.ZP,{onClick:function(){return t=n.id,void o.Z.confirm({centered:!0,title:"Confirm Deletion",content:"Are you sure you want to delete this path?",onOk:function(){console.log(t);var e={pathId:t};h.Z.post("".concat(S,"/api/paths-delete"),e).then((function(t){"0"===t.data.code?(console.log("Delete successful!",t.data),i.ZP.success("Delete success!"),window.location.reload()):"-1"===t.data.code&&console.error("Delete failed:",t.data.msg)}))}});var t},children:"Delete"}),(0,p.jsx)(c.ZP,{onClick:function(){return j(n.id)},children:"Share"})]})}}],g=function(t){var e=Math.floor(t/3600),n=Math.floor(t%3600/60),a=Math.round(t%60);return"".concat(e.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))},D=m.map((function(t,e){return{key:e+1,id:t.id,path:t.path,startTime:t.startTime,endTime:t.endTime,duration:t.duration,startAddress:t.startAddress,endAddress:t.endAddress,name:t.name}}));return(0,p.jsx)("div",{children:(0,p.jsx)("div",{children:(0,p.jsx)(d.Z,{title:"Saved Paths",children:(0,p.jsx)(s.Z,{columns:k,dataSource:D})})})})}}}]);
//# sourceMappingURL=23.096fac80.chunk.js.map